<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harmonisch & Melodisch Moll ‚Äì Modi & Skalen</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transition: width 0.3s ease;
            width: 0%;
        }

        .content {
            padding: 40px;
        }

        .start-screen, .question-screen, .result-screen {
            display: none;
        }

        .start-screen.active, .question-screen.active, .result-screen.active {
            display: block;
        }

        .start-info {
            text-align: center;
            padding: 20px;
        }

        .start-info h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .info-box {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .info-box ul {
            list-style: none;
            padding-left: 0;
        }

        .info-box li {
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .info-box li:last-child {
            border-bottom: none;
        }

        .info-box strong {
            color: #00f2fe;
        }

        .question-header {
            margin-bottom: 30px;
        }

        .question-number {
            color: #00f2fe;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 20px;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .answers {
            margin-bottom: 30px;
        }

        .answer-option {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .answer-option:hover {
            background: #e0f7ff;
            border-color: #4facfe;
            transform: translateX(5px);
        }

        .answer-option.selected {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .answer-option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .answer-option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .answer-option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .answer-label {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            color: #4facfe;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .answer-option.selected .answer-label {
            background: white;
            color: #4facfe;
        }

        .answer-option.correct .answer-label {
            background: white;
            color: #4caf50;
        }

        .answer-option.incorrect .answer-label {
            background: white;
            color: #f44336;
        }

        .explanation {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 5px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .explanation p {
            color: #856404;
            line-height: 1.6;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-summary {
            text-align: center;
            padding: 20px;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: bold;
            color: white;
            position: relative;
        }

        .score-circle.excellent {
            background: linear-gradient(135deg, #4caf50 0%, #8bc34a 100%);
        }

        .score-circle.good {
            background: linear-gradient(135deg, #2196f3 0%, #03a9f4 100%);
        }

        .score-circle.average {
            background: linear-gradient(135deg, #ff9800 0%, #ffc107 100%);
        }

        .score-circle.poor {
            background: linear-gradient(135deg, #f44336 0%, #e91e63 100%);
        }

        .result-message {
            font-size: 24px;
            color: #333;
            margin: 20px 0;
        }

        .result-details {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üéº Harmonisch & Melodisch Moll</h1>
        <p>Test: Modi, Skalen & Anwendung in der Jazz-Improvisation</p>
    </div>

    <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
    </div>

    <div class="content">
        <div class="start-screen active" id="startScreen">
            <div class="start-info">
                <h2>Willkommen zum Harmonisch-/Melodisch-Moll-Test!</h2>
                <div class="info-box">
                    <ul>
                        <li><strong>üìö Themen:</strong> Harmonisch Moll, Melodisch Moll, Modi & Akkord-Skalen-Zuordnung</li>
                        <li><strong>üìù Anzahl Fragen:</strong> 30 Multiple-Choice-Fragen</li>
                        <li><strong>üéØ Level:</strong> Mittelstufe bis Fortgeschritten (Jazz/Improvisation)</li>
                        <li><strong>üí° Lernmodus:</strong> Jede Frage mit ausf√ºhrlicher Erkl√§rung</li>
                        <li><strong>‚è±Ô∏è Zeit:</strong> Keine Zeitbegrenzung ‚Äì ideal zum √úben mit Instrument</li>
                    </ul>
                </div>
                <button class="btn btn-primary" onclick="startTest()">Test beginnen üéπ</button>
            </div>
        </div>

        <div class="question-screen" id="questionScreen">
            <div class="question-header">
                <div class="question-number" id="questionNumber">Frage 1 von 30</div>
                <div class="question-text" id="questionText"></div>
            </div>

            <div class="answers" id="answersContainer"></div>

            <div class="explanation" id="explanation">
                <h4>üí° Erkl√§rung:</h4>
                <p id="explanationText"></p>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" disabled>‚Üê Zur√ºck</button>
                <button class="btn btn-primary" onclick="checkAnswer()" id="checkBtn">Antwort pr√ºfen</button>
                <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" style="display:none;">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="result-screen" id="resultScreen">
            <div class="result-summary">
                <h2>Test abgeschlossen! üéâ</h2>
                <div class="score-circle" id="scoreCircle">
                    <span id="scorePercentage">0%</span>
                </div>
                <div class="result-message" id="resultMessage"></div>

                <div class="result-details">
                    <div class="result-item">
                        <span><strong>Richtige Antworten:</strong></span>
                        <span id="correctCount">0</span>
                    </div>
                    <div class="result-item">
                        <span><strong>Falsche Antworten:</strong></span>
                        <span id="incorrectCount">0</span>
                    </div>
                    <div class="result-item">
                        <span><strong>Gesamtpunktzahl:</strong></span>
                        <span id="totalScore">0/30</span>
                    </div>
                    <div class="result-item">
                        <span><strong>Prozentsatz:</strong></span>
                        <span id="percentageScore">0%</span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="restartTest()">Test wiederholen üîÑ</button>
            </div>
        </div>
    </div>
</div>

<script>
    const questions = [
        {
            type: 'multiple-choice',
            question: 'Was ist der wichtigste Unterschied zwischen der nat√ºrlichen Moll-Tonleiter (√Ñolisch) und der harmonischen Moll-Tonleiter?',
            options: [
                'Die 7. Stufe ist in Harmonisch Moll erh√∂ht (gro√üe Septime)',
                'Die 3. Stufe ist in Harmonisch Moll erh√∂ht',
                'Harmonisch Moll hat weniger T√∂ne',
                'Es gibt keinen Unterschied'
            ],
            correct: 0,
            explanation: 'Nat√ºrlich Moll (√Ñolisch) hat eine kleine Septime (‚ô≠7). In Harmonisch Moll wird die 7. Stufe erh√∂ht (gro√üe Septime), um eine starke Leittonwirkung zur Tonika zu erzeugen. In A: A nat√ºrlich Moll = A-H-C-D-E-F-G-A, A harmonisch Moll = A-H-C-D-E-F-G#-A.'
        },
        {
            type: 'multiple-choice',
            question: 'Was ist der wichtigste Unterschied zwischen Harmonisch Moll und Melodisch Moll (Jazz-Variante, auf- und abw√§rts gleich)?',
            options: [
                'In Melodisch Moll ist zus√§tzlich die 6. Stufe erh√∂ht',
                'In Melodisch Moll ist die 2. Stufe erniedrigt',
                'Harmonisch Moll hat eine erh√∂hte 6. Stufe',
                'Melodisch Moll ist identisch mit Dur'
            ],
            correct: 0,
            explanation: 'Harmonisch Moll: 1-2-‚ô≠3-4-5-‚ô≠6-7. Melodisch Moll (Jazz): 1-2-‚ô≠3-4-5-6-7. Der Unterschied: in Melodisch Moll wird zur erh√∂hten 7 auch die 6. Stufe angehoben, was den Sprung ‚ô≠6‚Äì7 gl√§ttet und einen moderneren, weniger exotischen Klang ergibt.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche T√∂ne geh√∂ren zur Tonleiter A harmonisch Moll?',
            options: [
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E ‚Äì F ‚Äì G# ‚Äì A',
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E ‚Äì F# ‚Äì G ‚Äì A',
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E ‚Äì F# ‚Äì G# ‚Äì A',
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E‚ô≠ ‚Äì F ‚Äì G ‚Äì A'
            ],
            correct: 0,
            explanation: 'A harmonisch Moll: 1 (A), 2 (H), ‚ô≠3 (C), 4 (D), 5 (E), ‚ô≠6 (F), 7 (G#). Typisch ist der gro√üe Schritt F‚ÄìG# (√ºberm√§√üige Sekunde).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche T√∂ne geh√∂ren zur Tonleiter A melodisch Moll (Jazz-Variante, auf- und abw√§rts gleich)?',
            options: [
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E ‚Äì F# ‚Äì G# ‚Äì A',
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E ‚Äì F ‚Äì G# ‚Äì A',
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E ‚Äì F# ‚Äì G ‚Äì A',
                'A ‚Äì H ‚Äì C ‚Äì D ‚Äì E‚ô≠ ‚Äì F ‚Äì G ‚Äì A'
            ],
            correct: 0,
            explanation: 'A melodisch Moll (Jazz): 1 (A), 2 (H), ‚ô≠3 (C), 4 (D), 5 (E), 6 (F#), 7 (G#). Also A-Dur mit kleiner Terz, oder: nat√ºrlich Moll, aber 6 und 7 erh√∂ht.'
        },
        {
            type: 'multiple-choice',
            question: 'Welches Akkordsymbol beschreibt typischerweise den I. Stufenakkord in einer Melodisch-Moll-Tonleiter?',
            options: [
                'mMaj7 (Moll-Dreiklang mit gro√üer Septime)',
                'm7 (Moll7)',
                'maj7 (Durmaj7)',
                'm7‚ô≠5 (halbvermindert)'
            ],
            correct: 0,
            explanation: 'Die 1. Stufe von Melodisch Moll ergibt einen Moll-Dreiklang mit gro√üer Septime: z.B. A melodisch Moll ‚Üí A‚ÄìC‚ÄìE‚ÄìG#. Das wird als AmMaj7 notiert und ist ein typischer Jazz-Akkord.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Skala passt am direktesten √ºber einen CmMaj7-Akkord?',
            options: [
                'C melodisch Moll',
                'C harmonisch Moll',
                'C nat√ºrlich Moll (√Ñolisch)',
                'C-Dur (Ionisch)'
            ],
            correct: 0,
            explanation: 'CmMaj7 = 1‚Äì‚ô≠3‚Äì5‚Äì7. Der passende Skalenkontext ist Melodisch Moll vom Grundton: C melodisch Moll = C‚ÄìD‚ÄìE‚ô≠‚ÄìF‚ÄìG‚ÄìA‚ÄìH. Die Skala enth√§lt exakt die Akkordt√∂ne C‚ÄìE‚ô≠‚ÄìG‚ÄìH sowie typische Optionst√∂ne.'
        },
        {
            type: 'multiple-choice',
            question: 'Wie viele Modi (Kirchentonleiter-√§hnliche Skalen) kann man aus einer einzelnen Melodisch-Moll-Tonleiter ableiten?',
            options: [
                '7',
                '5',
                '8',
                '12'
            ],
            correct: 0,
            explanation: 'Wie bei Dur und Harmonisch Moll entstehen auch aus Melodisch Moll 7 Modi, indem man auf jeder Stufe startet. Jeder Modus liefert einen anderen Akkord-/Skalen-Klang (z.B. Alteriert, Lydian Dominant usw.).'
        },
        {
            type: 'multiple-choice',
            question: 'Wie hei√üt der 7. Modus der Melodisch-Moll-Tonleiter im Jazz-Sprachgebrauch?',
            options: [
                'Alterierte Skala (Super-Lokrisch)',
                'Phrygisch Dominant',
                'Lydian Dominant',
                'Dorian ‚ô≠2'
            ],
            correct: 0,
            explanation: 'Der 7. Modus von Melodisch Moll wird meist als ‚ÄûAlterierte Skala‚Äú oder ‚ÄûSuper-Lokrisch‚Äú bezeichnet. Er enth√§lt alle alterierten Spannungst√∂ne einer Dominante: ‚ô≠9, #9, ‚ô≠5/#11, ‚ô≠13.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Melodisch-Moll-Tonleiter passt √ºber einen G7alt-Akkord (G7 mit ‚ô≠9/#9/‚ô≠5/#5)?',
            options: [
                'A‚ô≠ melodisch Moll',
                'G melodisch Moll',
                'D melodisch Moll',
                'C melodisch Moll'
            ],
            correct: 0,
            explanation: 'Die Alterierte Skala liegt immer einen Halbton √ºber dem Dominantgrundton. F√ºr G7alt: A‚ô≠ melodisch Moll. 7. Modus von A‚ô≠ melodisch Moll = G alteriert.'
        },
        {
            type: 'multiple-choice',
            question: 'Wie hei√üt der 4. Modus der Melodisch-Moll-Tonleiter?',
            options: [
                'Lydian Dominant (Lydisch ‚ô≠7)',
                'Phrygisch Dominant',
                'Ionisch ‚ôØ5',
                'Lokrisch ‚ôÆ2'
            ],
            correct: 0,
            explanation: 'Der 4. Modus von Melodisch Moll hei√üt ‚ÄûLydian Dominant‚Äú: eine lydische Skala mit kleiner Septime. Er eignet sich ideal f√ºr Dominant7#11-Akkorde.'
        },
        {
            type: 'multiple-choice',
            question: 'Zu welchem Akkordtyp passt der Modus ‚ÄûLydian Dominant‚Äú am besten?',
            options: [
                'Dominant7#11',
                'Maj7#11',
                'Moll7‚ô≠5',
                'MollMaj7'
            ],
            correct: 0,
            explanation: 'Lydian Dominant enth√§lt 1‚Äì2‚Äì3‚Äì#4‚Äì5‚Äì6‚Äì‚ô≠7. Die Kombination aus #11 und ‚ô≠7 entspricht einem Dominant7#11-Akkord (z.B. G7#11).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Melodisch-Moll-Tonleiter verwendest du, um √ºber G7#11 im Kontext von C-Dur zu spielen (z.B. G7 als V von C)?',
            options: [
                'D melodisch Moll',
                'G melodisch Moll',
                'C melodisch Moll',
                'A melodisch Moll'
            ],
            correct: 0,
            explanation: 'F√ºr G7#11 verwendest du Lydian Dominant von G. Das ist der 4. Modus von D melodisch Moll. Also: G Lydian Dominant = T√∂ne aus D melodisch Moll, beginnend auf G.'
        },
        {
            type: 'multiple-choice',
            question: 'Wie hei√üt der 5. Modus der Harmonisch-Moll-Tonleiter?',
            options: [
                'Phrygisch Dominant',
                'Lokrisch ‚ôÆ2',
                'Lydian Dominant',
                'Alteriert'
            ],
            correct: 0,
            explanation: 'Der 5. Modus von Harmonisch Moll hei√üt ‚ÄûPhrygisch Dominant‚Äú: phrygischer Charakter (‚ô≠2, ‚ô≠6) mit gro√üer Terz und kleiner Septime. Typisch f√ºr V7 in Mollkadenz (z.B. E-Phrygisch-Dominant √ºber E7 in A-Moll).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche T√∂ne hat E-Phrygisch-Dominant, wenn er aus A harmonisch Moll abgeleitet wird?',
            options: [
                'E ‚Äì F ‚Äì G# ‚Äì A ‚Äì H ‚Äì C ‚Äì D ‚Äì E',
                'E ‚Äì F# ‚Äì G# ‚Äì A ‚Äì H ‚Äì C ‚Äì D ‚Äì E',
                'E ‚Äì F ‚Äì G ‚Äì A ‚Äì H ‚Äì C ‚Äì D ‚Äì E',
                'E ‚Äì F ‚Äì G# ‚Äì A ‚Äì H ‚Äì C# ‚Äì D ‚Äì E'
            ],
            correct: 0,
            explanation: 'A harmonisch Moll = A‚ÄìH‚ÄìC‚ÄìD‚ÄìE‚ÄìF‚ÄìG#. Von der 5. Stufe (E) aus: E‚ÄìF‚ÄìG#‚ÄìA‚ÄìH‚ÄìC‚ÄìD‚ÄìE. Das ist E-Phrygisch-Dominant: ‚ô≠2 (F), gro√üe Terz (G#), ‚ô≠6 (C), ‚ô≠7 (D).'
        },
        {
            type: 'multiple-choice',
            question: 'Zu welchem Akkordtyp passt Phrygisch Dominant am besten?',
            options: [
                'Dominant7(b9, b13)',
                'Maj7#11',
                'MollMaj7',
                'Moll7‚ô≠5'
            ],
            correct: 0,
            explanation: 'Phrygisch Dominant enth√§lt 1‚Äì‚ô≠2‚Äì3‚Äì4‚Äì5‚Äì‚ô≠6‚Äì‚ô≠7. Das entspricht einem Dominant7-Akkord (1‚Äì3‚Äì5‚Äì‚ô≠7) plus ‚ô≠9 (‚ô≠2) und ‚ô≠13 (‚ô≠6). Typisch: V7(b9, b13) in Moll.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Skala nutzt du typischerweise √ºber einen II√∏7‚ÄìV7(b9)‚ÄìImaj7 in Moll (z.B. Bm7‚ô≠5 ‚Äì E7(b9) ‚Äì AmMaj7)?',
            options: [
                'Alles aus A melodisch Moll',
                'Alles aus A-Dur',
                'Alles aus A nat√ºrlich Moll',
                'Alles aus A harmonisch Moll'
            ],
            correct: 3,
            explanation: 'Die klassische Mollkadenz wird aus Harmonisch Moll abgeleitet: in A harmonisch Moll liegen Bm7‚ô≠5 (II√∏7), E7(b9) (V7(b9)) und AmMaj7 (I) nahe. Im Jazz kombiniert man oft Harmonisch und Melodisch Moll, aber die reine Funktionsableitung kommt aus Harmonisch Moll.'
        },
        {
            type: 'multiple-choice',
            question: 'Welcher Modus der Melodisch-Moll-Tonleiter hei√üt ‚ÄûDorian ‚ô≠2‚Äú?',
            options: [
                '2. Modus',
                '3. Modus',
                '5. Modus',
                '6. Modus'
            ],
            correct: 0,
            explanation: 'Der 2. Modus von Melodisch Moll hei√üt ‚ÄûDorian ‚ô≠2‚Äú: 1‚Äì‚ô≠2‚Äì‚ô≠3‚Äì4‚Äì5‚Äì6‚Äì‚ô≠7. Er klingt wie Dorisch, aber mit kleiner Sekunde und eignet sich f√ºr Moll-Akkorde mit ‚ô≠9 im Kontext von Melodisch Moll.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Skala eignet sich im Jazz h√§ufig √ºber einen m7‚ô≠5-Akkord mit nat√ºrlicher 9 (z.B. Bm7‚ô≠5 mit C# als 9)?',
            options: [
                'Der 6. Modus von Melodisch Moll (Lokrisch ‚ôÆ2)',
                'Nat√ºrlich Moll',
                'Dur-Pentatonik',
                'Blues-Skala'
            ],
            correct: 0,
            explanation: '√úber m7‚ô≠5-Akkorde mit nat√ºrlicher 9 verwendet man oft den 6. Modus von Melodisch Moll: ‚ÄûLokrisch ‚ôÆ2‚Äú. Beispiel: Bm7‚ô≠5 mit C# als 9 ‚Üí D melodisch Moll (6. Modus von D melodisch Moll beginnt auf B).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Intervallstruktur hat die Melodisch-Moll-Tonleiter vom Grundton aus betrachtet?',
            options: [
                'Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Ganz ‚Äì Ganz ‚Äì Halb (Dur mit ‚ô≠3)',
                'Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz',
                'Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Ganz',
                'Ganz ‚Äì Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Halb ‚Äì Ganz'
            ],
            correct: 0,
            explanation: 'Melodisch Moll kann man als Dur mit kleiner Terz sehen: Intervalle: 1‚Äì2‚Äì‚ô≠3‚Äì4‚Äì5‚Äì6‚Äì7. In Halbtonschritten: Ganz, Halb, Ganz, Ganz, Ganz, Ganz, Halb.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Intervallstruktur hat die Harmonisch-Moll-Tonleiter vom Grundton aus betrachtet?',
            options: [
                'Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Halb ‚Äì eineinhalb ‚Äì Halb',
                'Ganz ‚Äì Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Ganz ‚Äì Halb',
                'Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Ganz',
                'Halb ‚Äì Ganz ‚Äì Ganz ‚Äì Ganz ‚Äì Halb ‚Äì Ganz ‚Äì Ganz'
            ],
            correct: 0,
            explanation: 'Harmonisch Moll: 1‚Äì2‚Äì‚ô≠3‚Äì4‚Äì5‚Äì‚ô≠6‚Äì7. Die charakteristische √ºberm√§√üige Sekunde zwischen ‚ô≠6 und 7 entspricht drei Halbt√∂nen (eineinhalb Ganztonschritte).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Skala w√ºrdest du bevorzugt √ºber einen AmMaj7-Akkord in einer modalen Ballade verwenden?',
            options: [
                'A melodisch Moll',
                'A nat√ºrlich Moll',
                'A harmonisch Moll',
                'C-Dur'
            ],
            correct: 0,
            explanation: 'AmMaj7 ist die I. Stufe von A melodisch Moll. Die naheliegendste Skala ist daher A melodisch Moll, was einen modernen, leicht ‚Äûschwebenden‚Äú Moll-Klang erzeugt.'
        },
        {
            type: 'multiple-choice',
            question: 'Du hast eine II√∏7‚ÄìV7alt‚ÄìImMaj7-Kadenz in Moll (z.B. Bm7‚ô≠5 ‚Äì E7alt ‚Äì AmMaj7). Welche Kombination ist eine √ºbliche moderne Jazz-L√∂sung?',
            options: [
                'Bm7‚ô≠5: Lokrisch ‚ôÆ2, E7alt: Alteriert, AmMaj7: Melodisch Moll',
                'Bm7‚ô≠5: nat√ºrlich Moll, E7alt: Dur, AmMaj7: nat√ºrlich Moll',
                'Alle drei: nat√ºrlich Moll',
                'Alle drei: Harmonisch Moll'
            ],
            correct: 0,
            explanation: 'Eine g√§ngige moderne Jazz-Kombination: II√∏7 mit Lokrisch ‚ôÆ2 (6. Modus Melodisch Moll), V7alt mit Alterierter Skala (7. Modus Melodisch Moll einen Halbton h√∂her) und I mMaj7 mit Melodisch Moll vom Grundton. So nutzt man konsequent Melodisch-Moll-Material.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Skala eignet sich, um einen l√§nger stehenden Dominant7(b9,b13)-Akkord mit ‚Äûorientalischem‚Äú/spanischem Klang zu improvisieren?',
            options: [
                'Phrygisch Dominant (5. Modus Harmonisch Moll)',
                'Mixolydisch',
                'Ionisch',
                'Nat√ºrlich Moll'
            ],
            correct: 0,
            explanation: 'Der phrygisch-dominante Modus (5. Modus von Harmonisch Moll) hat die typische Kombination ‚ô≠2, 3, ‚ô≠6 und ‚ô≠7 und wird oft mit ‚Äûspanisch‚Äú, ‚Äûorientalisch‚Äú assoziiert, z.B. √ºber E7(b9,b13).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Skala passt gut √ºber einen Akkord-Typ ‚Äûmaj7#5‚Äú (z.B. Cmaj7#5)?',
            options: [
                'Der 3. Modus von Harmonisch Moll (Ionisch #5)',
                'Der 4. Modus von Melodisch Moll (Lydian Dominant)',
                'Der 7. Modus von Melodisch Moll (Alteriert)',
                'Nat√ºrlich Moll'
            ],
            correct: 0,
            explanation: 'Der 3. Modus von Harmonisch Moll hei√üt oft ‚ÄûIonisch #5‚Äú und liefert die Spannung #5 √ºber einem maj7-Akkord. Beispiel: Cmaj7#5 ‚Üí C-Ionisch-#5 aus A‚ô≠ harmonisch Moll.'
        },
        {
            type: 'multiple-choice',
            question: 'Du spielst √ºber einen G7(b9,13) im Kontext von C-Moll. Welche skalenbasierte Wahl ist funktional sinnvoll?',
            options: [
                'G-Phrygisch-Dominant aus C harmonisch Moll',
                'G-Mixolydisch aus C-Dur',
                'G-Dorisch aus F-Dur',
                'G-Lydisch aus D-Dur'
            ],
            correct: 0,
            explanation: 'In C harmonisch Moll ist die 5. Stufe G-Phrygisch-Dominant. Diese Skala enth√§lt ‚ô≠9 und h√§ufig ‚ô≠13, passt also ideal zum G7(b9,13) als Dominante in C-Moll.'
        },
        {
            type: 'multiple-choice',
            question: 'Welcher Modus von Melodisch Moll ist besonders geeignet f√ºr einen ‚Äûhalbverminderten‚Äú Akkord (m7‚ô≠5) ohne nat√ºrliche 9, z.B. Bm7‚ô≠5 mit C als 9?',
            options: [
                'Lokrisch (7. Modus von Dur) oder 2. Modus von Harmonisch Moll',
                'Ionisch',
                'Lydian Dominant',
                'Mixolydisch ‚ô≠6'
            ],
            correct: 0,
            explanation: 'Klassisch nutzt man Lokrisch aus Dur (7. Modus) f√ºr m7‚ô≠5, eventuell auch den 2. Modus von Harmonisch Moll. Will man eine nat√ºrliche 9, greift man aber zu Lokrisch ‚ôÆ2 (6. Modus Melodisch Moll).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Aussage zur Anwendung von Melodisch Moll in der Improvisation ist am treffendsten?',
            options: [
                'Melodisch Moll liefert eine Familie von Skalen, die viele typische Jazz-Akkorde direkt abdecken',
                'Melodisch Moll wird nur in klassischer Musik verwendet',
                'Melodisch Moll ersetzt die Dur-Tonleiter vollst√§ndig',
                'Melodisch Moll ist nur f√ºr Outside-Playing geeignet'
            ],
            correct: 0,
            explanation: 'Melodisch Moll ist im modernen Jazz extrem wichtig, weil ihre Modi direkt mit vielen Akkordtypen verkn√ºpft sind: mMaj7, m7‚ô≠5 mit ‚ôÆ9, Dominant7#11, Dominant7alt usw.'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Aussage zur Kombination von Harmonisch Moll und Melodisch Moll in Moll-Tonarten trifft am ehesten zu?',
            options: [
                'Beide Tonleitern werden oft gemischt: Harmonisch Moll f√ºr klassische Funktionsdominanten, Melodisch Moll f√ºr moderne Klangfarben',
                'Man darf nie beide verwenden',
                'Nur Harmonisch Moll ist theoretisch korrekt',
                'Nur Melodisch Moll ist im Jazz erlaubt'
            ],
            correct: 0,
            explanation: 'In der Praxis mischt man beide: Harmonisch Moll liefert die klare Funktionsdominante (V7(b9) in Moll), Melodisch Moll erweitert das Vokabular um moderne Modi (Alteriert, Lydian Dominant, mMaj7 usw.).'
        },
        {
            type: 'multiple-choice',
            question: 'Welche Skala eignet sich am besten, um √ºber einen l√§nger stehenden Akkord GmMaj7 in einer modalen Umgebung zu improvisieren?',
            options: [
                'G melodisch Moll',
                'G nat√ºrlich Moll',
                'G harmonisch Moll',
                'C-Dur'
            ],
            correct: 0,
            explanation: 'GmMaj7 ist die 1. Stufe von G melodisch Moll. Daher ist G melodisch Moll die logischste und reichhaltigste Skalenwahl f√ºr einen modalen Sound.'
        },
        {
            type: 'multiple-choice',
            question: 'Du m√∂chtest √ºber einen C7alt-Akkord in einer Turnaround-Progression m√∂glichst viel Spannung erzeugen. Welche Skala w√§hlst du?',
            options: [
                'Alterierte Skala (7. Modus von Des melodisch Moll)',
                'C-Mixolydisch',
                'C-Dur',
                'C nat√ºrlich Moll'
            ],
            correct: 0,
            explanation: 'F√ºr C7alt nimmst du die Alterierte Skala: 7. Modus von Des melodisch Moll. Sie enth√§lt alle alterierten Optionen (‚ô≠9, #9, ‚ô≠5/#11, ‚ô≠13) und maximiert die Spannung vor der Aufl√∂sung.'
        },
        {
            type: 'multiple-choice',
            question: 'Wie kannst du deinen Sch√ºlern die Verbindung ‚ÄûA harmonisch Moll‚Äú und ‚ÄûE7(b9)‚Äú praktisch verdeutlichen?',
            options: [
                'E7(b9) als V in A-Moll erkl√§ren und zeigen, dass alle T√∂ne von E7(b9) in A harmonisch Moll vorkommen',
                'E7(b9) als V in C-Dur erkl√§ren',
                'Nur die Pentatonik spielen lassen',
                'Den Zusammenhang ignorieren'
            ],
            correct: 0,
            explanation: 'E7(b9) ist die Dominante zu A-Moll. A harmonisch Moll liefert genau das Material f√ºr E7(b9): die gro√üe Leitton G# und die ‚ô≠9 (F). So wird die Funktionalit√§t von Harmonisch Moll im Kadenzieren klar h√∂rbar.'
        }
    ];

    let currentQuestion = 0;
    let score = 0;
    let userAnswers = [];
    let answerChecked = false;

    function startTest() {
        document.getElementById('startScreen').classList.remove('active');
        document.getElementById('questionScreen').classList.add('active');
        loadQuestion();
    }

    function loadQuestion() {
        const q = questions[currentQuestion];
        document.getElementById('questionNumber').textContent = `Frage ${currentQuestion + 1} von ${questions.length}`;
        document.getElementById('questionText').textContent = q.question;

        const answersContainer = document.getElementById('answersContainer');
        answersContainer.innerHTML = '';

        q.options.forEach((option, index) => {
            const answerDiv = document.createElement('div');
            answerDiv.className = 'answer-option';
            answerDiv.onclick = () => selectAnswer(index);
            answerDiv.innerHTML = `
                <span class="answer-label">${String.fromCharCode(65 + index)}</span>
                <span>${option}</span>
            `;
            answersContainer.appendChild(answerDiv);
        });

        document.getElementById('explanation').classList.remove('show');
        document.getElementById('checkBtn').style.display = 'block';
        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('prevBtn').disabled = currentQuestion === 0;

        answerChecked = false;
        updateProgressBar();
    }

    function selectAnswer(index) {
        if (answerChecked) return;

        const options = document.querySelectorAll('.answer-option');
        options.forEach(opt => opt.classList.remove('selected'));
        options[index].classList.add('selected');
        userAnswers[currentQuestion] = index;
    }

    function checkAnswer() {
        if (userAnswers[currentQuestion] === undefined) {
            alert('Bitte w√§hlen Sie eine Antwort aus!');
            return;
        }

        answerChecked = true;
        const q = questions[currentQuestion];
        const options = document.querySelectorAll('.answer-option');

        options.forEach((opt, index) => {
            opt.classList.add('disabled');
            if (index === q.correct) {
                opt.classList.add('correct');
            }
            if (index === userAnswers[currentQuestion] && index !== q.correct) {
                opt.classList.add('incorrect');
            }
        });

        if (userAnswers[currentQuestion] === q.correct) {
            score++;
        }

        document.getElementById('explanationText').textContent = q.explanation;
        document.getElementById('explanation').classList.add('show');
        document.getElementById('checkBtn').style.display = 'none';
        document.getElementById('nextBtn').style.display = 'block';
    }

    function nextQuestion() {
        currentQuestion++;
        if (currentQuestion < questions.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function previousQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            loadQuestion();

            if (userAnswers[currentQuestion] !== undefined) {
                const options = document.querySelectorAll('.answer-option');
                options[userAnswers[currentQuestion]].classList.add('selected');
            }
        }
    }

    function updateProgressBar() {
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        document.getElementById('progressBar').style.width = progress + '%';
    }

    function showResults() {
        document.getElementById('questionScreen').classList.remove('active');
        document.getElementById('resultScreen').classList.add('active');

        const percentage = Math.round((score / questions.length) * 100);
        const scoreCircle = document.getElementById('scoreCircle');

        document.getElementById('scorePercentage').textContent = percentage + '%';
        document.getElementById('correctCount').textContent = score;
        document.getElementById('incorrectCount').textContent = questions.length - score;
        document.getElementById('totalScore').textContent = `${score}/${questions.length}`;
        document.getElementById('percentageScore').textContent = percentage + '%';

        let message = '';
        let circleClass = '';

        if (percentage >= 90) {
            message = 'üéâ Exzellent! Dein Wissen √ºber Harmonisch/Melodisch Moll ist top!';
            circleClass = 'excellent';
        } else if (percentage >= 75) {
            message = 'üëè Sehr gut! Du hast die wichtigsten Modi und Anwendungen verstanden!';
            circleClass = 'good';
        } else if (percentage >= 60) {
            message = 'üëç Solide! Wiederhole ein paar Modi und Akkord-Skalen-Zuordnungen.';
            circleClass = 'average';
        } else {
            message = 'üìö Weiter √ºben! Spiele die Skalen √ºber echte II‚ÄìV‚ÄìI-Kadenzen in Moll.';
            circleClass = 'poor';
        }

        document.getElementById('resultMessage').textContent = message;
        scoreCircle.className = 'score-circle ' + circleClass;

        updateProgressBar();
    }

    function restartTest() {
        currentQuestion = 0;
        score = 0;
        userAnswers = [];
        answerChecked = false;

        document.getElementById('resultScreen').classList.remove('active');
        document.getElementById('startScreen').classList.add('active');
        document.getElementById('progressBar').style.width = '0%';
    }
</script>
</body>
</html>
